{"code": "#ifdef GL_ES\nprecision mediump float;\n#endif\n\nuniform float time;\nuniform vec2 mouse;\nuniform vec2 resolution;\n\n// neon spinner, nodj.\n\n\n#define PI       3.14159265359\n#define SCALE    1.\n#define N        8.\n#define R        0.45\n#define W        mouse.x*PI\n#define CONTRAST 1.6\n#define SPEED    1.\n#define OFFSET   0.98\n#define E        100.\n#define SAT      0.85\n#define TWIST    0.75\n\nconst float radius   = 0.33;\nconst vec3 color1 = 0.8*vec3(0.2,0.9,0.7);\nconst vec3 color2 = vec3(1.1,0.05,0.05);\n\nfloat a,r;\nvec2 p = vec2(0.);\n\n\nfloat d2y(float d){return 1./(0.2+d);}\nfloat angle(vec2 orig){ vec2 t = p-orig; return atan(t.y, t.x);}\nfloat sdistance(vec2 a, vec2 b){ b-=a; return dot(b,b);\t}\nfloat dCircle(vec2 center, float radius){ return abs(distance(p,center)-radius); }\nvec3 hsv2rgb(vec3 c){\n    vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n    vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\n    return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n}\n\nfloat dArc(vec2 center, float radius, float a0, float a1){\n\tfloat f = floor(a0/(2.*PI));\n\ta0-=f*2.*PI;\n\ta1-=f*2.*PI;\n\tfloat am = a;\n\t\n\tfloat dc = dCircle(center, radius);\n\tfloat dc0 = dc+100000.*(1.-step(a0,am)*step(am,a1));\n\tam +=2.*PI;\n\tdc0 = min(dc0,dc+100000.*(1.-step(a0,am)*step(am,a1)));\n\t\n\tfloat da0 = distance(p, radius*vec2(cos(a0), sin(a0)));\n\tfloat da1 = distance(p, radius*vec2(cos(a1), sin(a1)));\n\t\n\treturn min(dc0,min(da1,da0));\n}\n\nconst vec2 Orig = vec2(0.);\nvoid main() {\n\n\tp = SCALE*(gl_FragCoord.xy-0.5*resolution)/ resolution.y ;\n\t//r = length(p);\n\ta = angle(vec2(0.));\n\t\n\t\n\tvec3 rgb = vec3(0.);\n\tfloat t = time*SPEED;\n\tfor(float i = 0.; i<N; ++i){\n\t\tfloat x = 2.*t-OFFSET*(i-TWIST*N)*sin(t*0.8);\n\t\tfloat y = 0.;\n\t\tfloat r = R*(i+0.6)/N;\n\t\tfloat d = dArc(Orig, r, x, x+W);\n\t\ty += d2y(E*d);\n\t\t\n\t\tx+=PI;\n\t\td = dArc(Orig, r, x, x+W);\n\t\ty += d2y(E*d);\n\t\t\n\t\ty = pow(y,CONTRAST);\n\t\trgb += y * hsv2rgb(vec3(i/N, SAT,1.0));\n\t}\n\t\n\t\n\t\n\t\n\t\n\tgl_FragColor = vec4( rgb, 1.0 );\n\n}", "user": "d1f88ca", "parent": null, "id": "26988.20"}