{"code": "// by @eddbiddulph\n// autumn trees at night, from hiding in the grass\n// PLEASE view in 0.5 mode!!\n// ** MODIFIED ** - by @eddbiddulph (follow me on twitter!) and an unknown other\n\n#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform float time;\nuniform vec2 mouse;\nuniform vec2 resolution;\n\nfloat circle(vec2 p, vec2 o, float r)\n{\n\tp -= o;\n\treturn step(dot(p, p), r);\n}\n\nvec2 rotate(vec2 v, float angle)\n{\n\treturn vec2(v.x * cos(angle) - v.y * sin(angle),\n\t\t    v.y * cos(angle) + v.x * sin(angle));\n}\n\nfloat tree(vec2 p, vec2 o, float a)\n{\n\tp -= o;\n\n\tfloat m = step(p.y, 0.5) * step(abs(p.x), 0.01 / ((p.y + 0.3)));\n\n\tvec2 bo = vec2(0.0, 0.5);\n\n\t// make the branches and leaves with some circles\n\tm = max(m, circle(p, bo + rotate(vec2(0.0, 0.0), a), 0.01));\n\tm = max(m, circle(p, bo + rotate(vec2(0.1, 0.1), a), 0.011));\n\tm = max(m, circle(p, bo + rotate(vec2(-0.06, 0.05), a), 0.008));\n\tm = max(m, circle(p, bo + rotate(vec2(-0.02, 0.12), a), 0.008));\n\n\treturn m;\n}\n\nfloat rowOfTrees(vec2 p)\n{\n\tfloat a = cos(floor(p.x) * 20.6) * 3.1415926, b = 1.0 + cos(floor(p.x) * 10.0) * 0.2;\n\tp.x = mod(p.x, 1.0);\n\treturn tree(p * b, vec2(0.5, 0.0) * b, a);\n}\n\nfloat grass(vec2 p)\n{\n\tp *= vec2(10.0, 1.0) * 2.5;\n\tfloat a = floor(p.x) * 12.0, b = 1.0 + sin(floor(p.x)) * cos(floor(p.x) * 0.3) * 0.1;\n\tp.x = mod(p.x, 1.0) - 0.5;\n\treturn step(abs(p.x + cos(a) * p.y ), 0.5 - p.y * b);\n}\n\nfloat starPattern(vec2 p)\n{\n\treturn 0.1 / (abs(cos(p.x)) + 0.01) * 0.1 / (abs(sin(p.y)) + 0.01) * abs(sin(p.x)) * abs(cos(p.y));\n}\n\nvec3 stars(vec2 p)\n{\n\tp -= 0.5;\n\n\tfloat a = starPattern(rotate(p / 26.0, 0.1)) * max(0.0, 1.3 + cos(p.x + time)) +\n\t\tstarPattern(rotate(p * 50.0, 0.2)) * max(0.0, 1.2 + cos(p.x * 0.4 + time * 2.0));\n\n\treturn vec3(a * 0.1 * (1.0 + (2.0 + sin(time * 30.0)) * 0.2));\n}\n\nvoid main(void)\n{\n\tvec2 p = gl_FragCoord.xy / resolution.xy * vec2(resolution.x / resolution.y, 1.0),\n\t\tscroll = vec2(time * 0.05, 0.0);\n\n\tvec3 col = vec3((1.0 - p.y) * 0.1, (1.0 - p.y) * 0.1, 0.1); // backdrop\n\n\tcol += stars(p) * max(0.0, p.y - 1000.6);\n\n  \tfor(int i = 0; i < 10; ++i)\n    {\n        float fi = float(i) + 1.0;\n        \n        if(rowOfTrees(p * fi + scroll + vec2(fi * 20.0, 0.0)) > 0.0)\n        {\n            col = vec3(0.4, 0.7, 0.1) / fi;\n            break;\n        }\n    }\n\n\tgl_FragColor.a = 1.0;\n\tgl_FragColor.rgb = col;\n}", "user": "86ff805", "parent": "/e#710.0", "id": "714.0"}