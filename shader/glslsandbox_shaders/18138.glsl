{"code": "// From iq's latest live coding video, \"a simple eye ball\"\n\n#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform vec2 resolution;\nuniform float time;\n\nmat2 m = mat2( 0.40,  0.50, -0.10,  0.70 );\n\nfloat hash( float n )\n{\n    return fract(sin(n)*43758.5453);\n}\n\nfloat noise( in vec2 x )\n{\n    vec2 p = floor(x);\n    vec2 f = fract(x);\n    f = f*f*(3.0-2.0*f);\n    float n = p.x + p.y*57.0;\n    float res = mix(mix( hash(n+  0.0), hash(n+  1.0),f.x), mix( hash(n+ 57.0), hash(n+ 58.0),f.x),f.y);\n    return res;\n}\n\nfloat fbm( vec2 p )\n{\n    float f = 0.0;\n    f += 0.50000*noise( p ); p = m*p*2.02;\n    f += 0.25000*noise( p ); p = m*p*2.03;\n    f += 0.12500*noise( p ); p = m*p*2.01;\n    f += 0.06250*noise( p ); p = m*p*2.04;\n    f += 0.03125*noise( p );\n    return f/0.984375;\n}\n\nfloat length2( vec2 p )\n{\n    float ax = abs(p.x);\n    float ay = abs(p.y);\n    return pow( pow(ax,4.0) + pow(ay,4.0), 1.0/4.0 );\n}\n\nvoid main(void)\n{\n    vec2 q = gl_FragCoord.xy / resolution.xy;\n    vec2 p = -1.0 + 2.0 * q;\n    p.x *= resolution.x/resolution.y;\n    float r = length( p );\n    float a = atan( p.y, p.x );\n    float dd = 0.2*sin(0.7*time);\n    float ss = 1.0 + clamp(1.0-r,0.0,1.0)*dd;\n    r *= ss;\n    vec3 col = vec3( 0.0, 0.3, 0.4 );\n    float f = fbm( 5.0*p );\n    col = mix( col, vec3(0.2,0.5,0.4), f );\n    col = mix( col, vec3(0.9,0.6,0.2), 1.0-smoothstep(0.2,0.6,r) );\n    a += 0.05*fbm( 20.0*p );\n    f = smoothstep( 0.3, 1.0, fbm( vec2(20.0*a,6.0*r) ) );\n    col = mix( col, vec3(1.0,1.0,1.0), f );\n    f = smoothstep( 0.4, 0.9, fbm( vec2(15.0*a,10.0*r) ) );\n    col *= 1.0-0.5*f;\n    col *= 1.0-0.25*smoothstep( 0.6,0.8,r );\n    f = 1.0-smoothstep( 0.0, 0.6, length2( mat2(0.6,0.8,-0.8,0.6)*(p-vec2(0.3,0.5) )*vec2(1.0,2.0)) );\n    col += vec3(1.0,0.9,0.9)*f*0.985;\n    col *= vec3(0.8+0.2*cos(r*a));\n    f = 1.0-smoothstep( 0.2, 0.25, r );\n    col = mix( col, vec3(0.0), f );\n    f = smoothstep( 0.79, 0.82, r );\n    col = mix( col, vec3(0,0,0), f );\n    gl_FragColor = vec4(col,0.5);\n}", "user": "18ef809", "parent": "/e#7391.0", "id": "18138.0"}