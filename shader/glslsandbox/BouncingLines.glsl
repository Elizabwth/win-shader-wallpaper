{"code": "// From shadertoy by Mr Andre\n// Gigatron for glslsandbox ; \n#ifdef GL_ES\nprecision mediump float;\n#endif\n\nuniform float time;\nuniform vec2 mouse;\nuniform vec2 resolution;\n\n#define StepSize 0.05\n#define LineCount 120\n\n//Function to draw a line, taken from the watch shader\nfloat line(vec2 p, vec2 a, vec2 b, float thickness )\n{\n\tvec2 pa = p - a;\n\tvec2 ba = b - a;\n\tfloat h = clamp(dot(pa, ba) / dot(ba, ba), 0.0, 1.0125);\n\treturn 1.0 - smoothstep(thickness * 0.0667, thickness * 0.999, length(pa - ba * h));\n}\t\n\nvoid main() \n{\n\tvec2 uv = (gl_FragCoord.xy / resolution.xy) * 2.0 - 1.0;\n\n\t// convert the input coordinates by a cosinus\n\t// warpMultiplier is the frequency\n\tfloat warpMultiplier = (0.5 + 0.2345 * sin(time * 0.96)+1.111);\n\tvec2 warped = atan(uv * 6.28318530718 * warpMultiplier);\n\n\t// blend between the warpeffect and no effect\n\t// don't go all the way to the warp effect\n\tfloat warpornot = smoothstep(1.25, 0.567, -asin((time * 0.667)+3.333));\n\tuv = mix(uv, warped, warpornot);\n\n\t// Variate the thickness of the lines\n\tfloat thickness = pow(3.333 - 6.667 / cos(time * 0.67), 0.125) / (resolution.x*0.125);\n\tthickness *= 1.111 - (warpMultiplier * warpornot);\n\tfloat gt = floor(time * 25.0) * StepSize;\n\n\t// Add 10 lines to the pixel\n\tvec4 color = vec4(0.0, 0.0, 0.0, 1.0);\n\tfor (int i = 0; i < LineCount; i++)\n\t{\n\t\tgt += StepSize;\n\n\t\t//Calculate the next two points\n\t\tvec2 point1 = vec2(sin(gt * 0.39), cos(gt * 0.63));\n\t\tvec2 point2 = vec2(cos(gt * 0.69), sin(gt * 0.29));\n\n\t\t// Fade older lines\n\t\tcolor.rgb = 0.999 * color.rgb;\n\n\t\t// Add new line\n\t\tcolor.rgb += line(\tuv,\n\t\t\t\t\t\t\tpoint1, point2,\n\t\t\t\t\t\t\tthickness\t\t)\n\t\t\t\t\t//With color\n\t\t\t\t\t* ( 0.3 +\n\t\t\t\t\t\t0.3 * vec3(\tsin(gt * 3.13),\n\t\t\t\t\t\t\t\t\tsin(gt * 1.69),\n\t\t\t\t\t\t\t\t\tsin(gt * 2.67)));\n}\n\n\t// Clamp oversaturation\n\tgl_FragColor = clamp(color, 0.0, 1.0);\n}\n//void main( void ){vec4 color = vec4(0.0,0.0,0.0,1.0);mainImage( color, gl_FragCoord.xy );color.w = 1.0;gl_FragColor = color;}", "user": "51af143", "parent": "/e#25779.0", "id": "26569.1"}