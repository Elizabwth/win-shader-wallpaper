{"code": "#ifdef GL_ES\nprecision mediump float;\n#endif\n\nuniform float time;\nuniform vec2 resolution;\n\n#define PI 3.14159265358979323846\n\n#define u_resolution resolution\n#define u_time time\n\nfloat soc(vec3 p) {\n    vec3 n = normalize(sign(p+1e6));\n    return min(min(dot(p.xy, n.xy), dot(p.yz, n.yz)), dot(p.xz, n.xz));\n}\n\nmat2 r2d(float a) {\n    float sa=sin(a);\n    float ca=cos(a);\n    return mat2(ca,sa,-sa,ca);\n}\n\nvec2 amod(vec2 p, float m) {\n    float a=mod(atan(p.x,p.y), m)-m*.5;\n    return vec2(cos(a), sin(a))*length(p);\n}\n\nfloat map(vec3 p) {\n    // mat2 r = r2d(u_time);\n    float d = 1.0;\n    vec3 o=p;\n    float a=mod(o.y+5.0+u_time, 20.0)-10.;\n    a = abs(o.y);\n\n    // p.yz *= r2d(sign(a)*u_time*.5);\n    p.xz *= r2d(sign(a)*u_time*.2);\n\n    p.xz = amod(p.xz, PI/4.);\n\n    p.xz = max(abs(p.xz)-3.692, -1.296);\n    // p.x = mod(p.x, 4.)-2.;\n    // p.z = mod(p.z, 4.)-2.;\n    p.y = mod(p.y+u_time, 10.)-5.;\n    \n    \n    d = min(d, soc(max(abs(p)-0.172, 0.)));\n    \n    return d;\n    return min(d, length(abs(o.xz*r2d(o.y-u_time*.6))-1.)*0.336);\n    // return length(p)-0.5;\n}\n\nvoid main() {\n    vec2 st = (gl_FragCoord.xy/u_resolution.xy)*2.-1.;\n    st.x *= u_resolution.x/u_resolution.y;\n\n    vec3 ro=vec3(st, 5.000),\n    \trd=normalize(vec3(st+vec2(0.), -0.944)),\n\t    // rd=vec3(st, -1.),\n    \tmp;\n    float md;\n\tmp = ro;\n    \n    for (int i=0; i<50; i++) {\n        md = map(mp);\n        if (md <.001) break;\n        mp += rd*md;\n    }\n\n    gl_FragColor = vec4(length(ro-mp)*0.020);\n}", "user": "17699b", "parent": null, "id": "45430.1"}