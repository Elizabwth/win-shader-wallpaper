{"code": "//Archimedes spiral, antialiased\n\n#ifdef GL_ES\nprecision mediump float;\n#endif\n\nuniform float time;\nuniform vec2 mouse;\nuniform vec2 resolution;\n\nconst float PI = 3.1415926;\nconst float EPSILON = 0.1;\n\nvec2 perspective(vec2 scaled) {\n\tfloat z = 1.2-scaled.y+cos((scaled.x)*scaled.y*6.)*.1;\n\treturn vec2((scaled.x-.5)/z,sin((scaled.x-.5)*10./z)*.15+1./z)*.5;\n}\n\nfloat getval(vec2 car) {\n\tfloat r = sqrt(car.x * car.x + car.y * car.y);\n\tfloat theta = atan(car.y, car.x);\n\t\n\treturn fract(time) * 2. + theta / (2. * PI) - r * 16.;\n}\n\nvoid main( void ) {\n\tvec2 mousepersp = perspective(mouse);\n\tvec2 vec = perspective(gl_FragCoord.xy / resolution.xy) - mousepersp;\n\tfloat val = getval(vec);\n\tfloat valx = getval(perspective((gl_FragCoord.xy + vec2(.01,0)) / resolution.xy) - mousepersp)-val;\n\tfloat valy = getval(perspective((gl_FragCoord.xy + vec2(0,.01)) / resolution.xy) - mousepersp)-val;\n\tfloat aa = sqrt(valx*valx+valy*valy)*250.;\n\taa = aa > 200. ? 0. : atan(min(aa,PI*.4999))*.3;\n\t\n\tvec3 color = vec3(sqrt((1.-smoothstep(EPSILON-aa, EPSILON+aa, abs(fract(val)-.5)))/(1.+dot(vec,vec)*20.)));\n\t\n\tgl_FragColor = vec4(color, 1.0);\n}", "user": "cc6a51e", "parent": "/e#1626.0", "id": "1629.1"}