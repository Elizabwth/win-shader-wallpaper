{"code": "#ifdef GL_ES\nprecision mediump float;\n#endif\n\nuniform float time;\nuniform vec2 resolution;\n\nfloat h(vec3 q)\n{\n\tfloat f=1.*distance(q,vec3(cos(time)+sin(time*.2),.3,2.+cos(time*.5)*.5));\n\tf*=distance(q,vec3(-cos(time*.7),.3,2.+sin(time*.5)));\n\tf*=distance(q,vec3(-sin(time*.2)*.5,sin(time),2.)); \n\tf*=cos(q.y)*cos(q.x)-.1-cos(q.z*7.+time*7.)*cos(q.x*3.)*cos(q.y*4.)*.1;\n\n\treturn f;\n}\n\nfloat w(vec2 v)\n{\n\tv=abs(v/resolution.xy-.5);\n\n\treturn min(v.x,v.y)*2.2*(max(v.x,v.y));\n}\n\n\nvoid main(void) \n{\n    vec2 p = -1.0 + 2.0 * gl_FragCoord.xy / resolution.xy;\n    vec3 o=vec3(p.x,p.y*0.55-0.3,0.);\n    vec3 d=vec3(p.x+cos(time)*0.01,p.y,1.)/54.;\n    vec4 c=vec4(-.1);\n    float t=0.;\n    float check=0.4;\n    for (int i=0;i<64;i++)\n    {\n        if (h(o+d*t)<.4)\n        {\n            t-=4.;\n            for (int j=0;j<8;j++)\n            {\n                if (h(o+d*t)<.4)\n                    break;\n                t+=.5;\n            }\n            vec3 e=vec3(.01,.0,.0);\n            vec3 n=vec3(.0);\n            n.x=h(o+d*t)-h(vec3(o+d*t+e.xyy));\n            n.y=h(o+d*t)-h(vec3(o+d*t+e.yxy));\n            n.z=h(o+d*t)-h(vec3(o+d*t+e.yyx));\n            n=normalize(n);\n            c+=max(dot(vec3(.0,.0,-0.),n),.0)+max(dot(vec3(0.25,-0.25,-1.5),n),.0)*.55;\n            break;\n        }\n        t+=4.;\n    }\n\t\n    gl_FragColor = c+vec4(.1+w(gl_FragCoord.xy),.2,.5-w(gl_FragCoord.xy),1.)*(t*.03);\n}\n", "user": "635f930", "parent": "/e#4893.0", "id": "6342.2"}