{"code": "#ifdef GL_ES\nprecision mediump float;\n#endif\n\n#extension GL_OES_standard_derivatives : enable\n\n//Shitty fireworks by czpal\n\nuniform float time;\nuniform vec2 mouse;\nuniform vec2 resolution;\n\n\nfloat tb = 2.0;\n\n\n\nvec4 getFirework(float t)\n{\n\tfloat tmp = mod(t,tb);\n\tfloat x = (cos(floor(t/tb)*3.234)+1.5)/3.0;\n\treturn vec4(x, (log(tmp*6.0)/tb)*0.5, tmp, floor(t/tb));\n}\n\nvec3 getColor(float tmp)\n{\n\treturn vec3(cos(tmp), sin(tmp), cos(tmp*tmp));\n}\n\n\n\nvoid main( void ) \n{\n\tvec2 position = ( gl_FragCoord.xy / resolution.xy );\n\t\n\tvec4 firework = getFirework(time);\n\t\n\tvec3 value = getColor(firework.w);\n\tif(firework.z<tb*0.6)\n\t\tvalue *= 0.001/distance(position, firework.xy);\n\telse\n\t{\n\t\tvec2 tmp1 = (firework.xy-position);//abs(abs(position - firework.xy)+(tb*0.6-firework.z)*0.2);\n\t\t#define R2(T) mat2(cos(T),sin(T),-sin(T),cos(T))\n\t\tfloat accum = (firework.z-tb*0.6);\n\t\tfloat produ = 1.;\n\t\tfor(float i = 0.; i <= 8.; i += 1.001){\n\t\t\tprodu *= accum;\n\t\t\ttmp1 += (mouse)*sign(tmp1)*(-0.1-0.1*i)*produ;\n\t\t\ttmp1 *= R2(time/max(12.-i, 1.0));\n\t\t\t\n\t\t}\n\t\tfloat tmp2 = atan(tmp1.y, tmp1.x);\n\t\t\n\t\tvalue *= (0.01/length(tmp1)) * sin((firework.z-tb*0.6)*3.0);\n\t\tvalue *= (sin(tmp2*firework.z*20.0)+1.0)*0.5;\n\t\t\n\t\tvalue /= (6.+10.*accum);\n\t\tvalue += dot(value,value)*(0.1+value);\n\t}\n\t\t\n\t\n\tgl_FragColor = vec4(value,1);\n\n}", "user": "8539285", "parent": "/e#47265.0", "id": 47275}