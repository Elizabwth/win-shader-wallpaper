{"code": "#ifdef GL_ES\nprecision mediump float;\n#endif\n\nuniform float time;\nuniform vec2 mouse;\nuniform vec2 resolution;\n\n\nfloat line(vec2 a, float rot, float height, float width, vec2 p)\n{\n\tp = vec2(p.x * cos(rot) + p.y * -sin(rot), p.x * sin(rot) + p.y * cos(rot));\n\tvec2 pos = p-a;\n\tfloat radius = width * 0.5 * (2.5+sin(atan(pos.y, pos.x)*5.0));\n\tfloat v = max(0.0, min(1.0, (radius-length(p-a))*40.0));\n\treturn v;\n}\n\nvoid main( void )\n{\n\tvec2 position = ( gl_FragCoord.xy / resolution.xy * 2.0 - 1.0 );\n\tposition.x *= resolution.x / resolution.y;\n\tposition*=3.0;\n\tvec2 origin = vec2(mouse)*2.0 - 1.0;\n\torigin *= 5.0;\n\tfloat rot = 0.0;\n\tfloat height = 0.5;\n\tfloat width = 0.1;\n\tvec3 color = vec3(0.0, 0.0, 0.0);\n\tfor(float i = 0.; i < 80.; i++)\n\t{\n\t\tfloat lit = line(origin, rot, height, width, position * (7.0/(1.0+i*.12)))*(.95-i*.004)*1.5;\n\t\tfloat ang = i/50.0*3.14+time;\n\t\tcolor.r += max(0.0, sin(ang)+0.5)*lit;\n\t\tcolor.g += max(0.0, sin(ang+2.09)+0.5)*lit;\n\t\tcolor.b += max(0.0, sin(ang-2.09)+0.5)*lit;\n\t\twidth += 0.01;\n\t\theight += 0.5;\n\t\trot += time*0.01;\n\t}\n\tcolor*=0.3;\n\tgl_FragColor = vec4( color , 1.0 );\n\n}", "user": "9a3edb7", "parent": "/e#47248.0", "id": 47335}