{"code": "#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform float time;\nuniform vec2 mouse;\nuniform vec2 resolution;\n\nvoid main( void ) {\n\n\tvec2 position = ( gl_FragCoord.xy / resolution.xy );\n\n\tfloat color = 0.0;\t\n\tfloat vx, vy, vz, vxr;\n\tfloat dx, llx, dy, lly, dz, llz;\n\tint px, py, pz, ccc, P;\n\tfloat k, k2;\n\tivec4 di;\n\tvec4 X;\n\tvec4 d=vec4(time,mouse.y*3.0,.0,.0);\n\tvx=(position.x-0.5)+0.0001;\n\n\tvy=(position.y -0.5)+0.0001;\n\tvz=0.5+.0001;\n\tvxr=(vx*cos(mouse.x*2.5)+vz*sin(mouse.x*2.5));\n\t vz=(-vx*sin(mouse.x*2.5)+vz*cos(mouse.x*2.5));\n\tvx=vxr;\n\tX=fract(d);\n\tdx = 1000.0/vx; dy = 1000.0/vy; dz = 1000.0/vz;\n\tpx=1; llx=dx*(1.0-X[0]);\n\tpy=16; lly=dy*(1.0-X[1]);\n\tpz=256; llz=dz*(1.0-X[2]);\n\tif (dx<.0) {px=-1; dx=-dx; llx=dx*X[0];}\n\tif (dy<.0) {py=-16; dy=-dy; lly=dy*X[1];}\n\tif (dz<.0) {pz=-256; dz=-dz; llz=dz*X[2];}\n\tccc=0;\n\tdi=ivec4(d[0],d[1],d[2],d[3]);\n\tP=di[2]*256+di[1]*16+di[0];\n\tcolor=1.0;\n\tfor (int i=0; i<50; i++)\n\t{\n\t\tif ((llx<=lly) && (llx<=llz))\n\t\t{\n\t\t\tP+=px; llx+=dx; k=0.75;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (lly<=llz)\n\t\t\t{\n\t\t\t\tP+=py; lly+=dy; k=0.9;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tP+=pz; llz+=dz; k=1.0;\n\t\t\t}\n\t\t}\n\t\tif ((fract(float(P)/29.0)<.01)&&(color==1.0)) {\n\t\t\tcolor=float(i)/40.0;\n\t\t\tk2=k;\n\t\t}\n\t}\n\tgl_FragColor = vec4(k2*(1.0-color),k2*(1.0-color),k2*k2*(1.0-color),1.0 );\n\n}", "user": "437a2f9", "parent": "/e#36661.0", "id": 47463}