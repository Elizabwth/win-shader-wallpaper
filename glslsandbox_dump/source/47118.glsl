{"code": "#ifdef GL_ES\nprecision mediump float;\n#endif\n\n//parellel sort networks generated using the bose-nelson algorithm\n//sphinx\n\n#define SPEED 32.\n#define COUNT 32 \n\nuniform float time;\nuniform vec2 mouse;\nuniform vec2 resolution;\n\nvoid generate(out float l[COUNT]);\nvoid sort(inout float l[COUNT]);\nvoid swap(inout float a, inout float b);\n\nfloat hash(in float x);\nvec3 hsv(in float h, in float s, in float v);\n\n\nvoid main( void ) \n{\n\t#if COUNT == 8 || COUNT == 16 || COUNT == 24 || COUNT == 32\n\tvec2 uv \t\t\t\t= gl_FragCoord.xy / resolution.xy;\n\tvec2 panel \t\t\t\t= floor(uv * vec2(1., 2.));\n\tvec2 panel_uv\t\t\t\t= fract(uv * vec2(1., 2.));\n\tvec2 panel_grid \t\t\t= floor(panel_uv * vec2(COUNT, 1.));\n\tvec3 result\t\t\t\t= vec3(0., 0., 0.);\t\n\t\n\tbool bottom \t\t\t\t= panel.y == 0.;\n\t\n\t\n\tfloat list[COUNT];\t\n\n\tgenerate(list);\t\n\t\n\tif(bottom)\n\t{\n\t\tsort(list);\n\t}\n\t\n\tfor(int i = 0; i < COUNT; i++)\n\t{\t\t\t\t\n\t\tif(float(i) == panel_grid.x)\n\t\t{\n\t\t\tfloat shade = abs(panel_uv.y/list[i])*.75+.25;\n\t\t\tif(bottom)\n\t\t\t{\n\t\t\t\tresult += float(list[i] > panel_uv.y) * hsv(list[i] * .6, 1., 1.) * shade;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tresult\t+= float(list[i] > panel_uv.y) * hsv(list[i] * .6, 1., 1.) * shade;\n\t\t\t}\n\t\t}\n\t}\t\n\n\t\t\n\tgl_FragColor.xyz\t\t\t= result;\n\tgl_FragColor.w\t\t\t\t= 1.;\n\t#else\t\n\tgl_FragColor\t\t\t\t= vec4(0., 0., 0., 0.);\n\t#endif\n}\n\n\nvec3 hsv(in float h, in float s, in float v)\n{\n\treturn mix(vec3(1.,1.,1.), clamp((abs(fract(h+vec3(3.,2.,1.)/3.)*6.-3.)-1.),0.,1.),s)*v;\n}\n\n\nfloat hash(in float x)\n{\n\tfloat k = x * 65537.618034;   \t\n\treturn fract(fract(k * x) * k);\n}\n\n\nvoid generate(out float l[COUNT])\n{\n\tfloat s = SPEED;\n\tfloat t = ceil(mod(time * s, 65536.))/65537.;\n\tfloat n = t;\n\tfor(int i = 0; i < COUNT; i++)\n\t{\n\t\tl[i] \t= hash(n + t * .18);\n\t\tn \t= l[i];\n\t}\n}\n\n\nvoid sort(inout float l[COUNT])\n{\n\t#if COUNT == 8\n\tswap(l[0], l[1]);\n\tswap(l[2], l[3]);\n\tswap(l[0], l[2]);\n\tswap(l[1], l[3]);\n\tswap(l[1], l[2]);\n\tswap(l[4], l[5]);\n\tswap(l[6], l[7]);\n\tswap(l[4], l[6]);\n\tswap(l[5], l[7]);\n\tswap(l[5], l[6]);\n\tswap(l[0], l[4]);\n\tswap(l[1], l[5]);\n\tswap(l[1], l[4]);\n\tswap(l[2], l[6]);\n\tswap(l[3], l[7]);\n\tswap(l[3], l[6]);\n\tswap(l[2], l[4]);\n\tswap(l[3], l[5]);\n\tswap(l[3], l[4]);\n\t#endif\n\t\n\t#if COUNT == 16\n\tswap( l[0],  l[1]);\n\tswap( l[2],  l[3]);\n\tswap( l[0],  l[2]);\n\tswap( l[1],  l[3]);\n\tswap( l[1],  l[2]);\n\tswap( l[4],  l[5]);\n\tswap( l[6],  l[7]);\n\tswap( l[4],  l[6]);\n\tswap( l[5],  l[7]);\n\tswap( l[5],  l[6]);\n\tswap( l[0],  l[4]);\n\tswap( l[1],  l[5]);\n\tswap( l[1],  l[4]);\n\tswap( l[2],  l[6]);\n\tswap( l[3],  l[7]);\n\tswap( l[3],  l[6]);\n\tswap( l[2],  l[4]);\n\tswap( l[3],  l[5]);\n\tswap( l[3],  l[4]);\n\tswap( l[8],  l[9]);\n\tswap(l[10], l[11]);\n\tswap( l[8], l[10]);\n\tswap( l[9], l[11]);\n\tswap( l[9], l[10]);\n\tswap(l[12], l[13]);\n\tswap(l[14], l[15]);\n\tswap(l[12], l[14]);\n\tswap(l[13], l[15]);\n\tswap(l[13], l[14]);\n\tswap( l[8], l[12]);\n\tswap( l[9], l[13]);\n\tswap( l[9], l[12]);\n\tswap(l[10], l[14]);\n\tswap(l[11], l[15]);\n\tswap(l[11], l[14]);\n\tswap(l[10], l[12]);\n\tswap(l[11], l[13]);\n\tswap(l[11], l[12]);\n\tswap( l[0],  l[8]);\n\tswap( l[1],  l[9]);\n\tswap( l[1],  l[8]);\n\tswap( l[2], l[10]);\n\tswap( l[3], l[11]);\n\tswap( l[3], l[10]);\n\tswap( l[2],  l[8]);\n\tswap( l[3],  l[9]);\n\tswap( l[3],  l[8]);\n\tswap( l[4], l[12]);\n\tswap( l[5], l[13]);\n\tswap( l[5], l[12]);\n\tswap( l[6], l[14]);\n\tswap( l[7], l[15]);\n\tswap( l[7], l[14]);\n\tswap( l[6], l[12]);\n\tswap( l[7], l[13]);\n\tswap( l[7], l[12]);\n\tswap( l[4],  l[8]);\n\tswap( l[5],  l[9]);\n\tswap( l[5],  l[8]);\n\tswap( l[6], l[10]);\n\tswap( l[7], l[11]);\n\tswap( l[7], l[10]);\n\tswap( l[6],  l[8]);\n\tswap( l[7],  l[9]);\n\tswap( l[7],  l[8]);\n\t#endif\n\t\n\t#if COUNT == 24\n\tswap( l[1],  l[2]);\n\tswap( l[0],  l[2]);\n\tswap( l[0],  l[1]);\n\tswap( l[4],  l[5]);\n\tswap( l[3],  l[5]);\n\tswap( l[3],  l[4]);\n\tswap( l[0],  l[3]);\n\tswap( l[1],  l[4]);\n\tswap( l[2],  l[5]);\n\tswap( l[2],  l[4]);\n\tswap( l[1],  l[3]);\n\tswap( l[2],  l[3]);\n\tswap( l[7],  l[8]);\n\tswap( l[6],  l[8]);\n\tswap( l[6],  l[7]);\n\tswap(l[10], l[11]);\n\tswap( l[9], l[11]);\n\tswap( l[9], l[10]);\n\tswap( l[6],  l[9]);\n\tswap( l[7], l[10]);\n\tswap( l[8], l[11]);\n\tswap( l[8], l[10]);\n\tswap( l[7],  l[9]);\n\tswap( l[8],  l[9]);\n\tswap( l[0],  l[6]);\n\tswap( l[1],  l[7]);\n\tswap( l[2],  l[8]);\n\tswap( l[2],  l[7]);\n\tswap( l[1],  l[6]);\n\tswap( l[2],  l[6]);\n\tswap( l[3],  l[9]);\n\tswap( l[4], l[10]);\n\tswap( l[5], l[11]);\n\tswap( l[5], l[10]);\n\tswap( l[4],  l[9]);\n\tswap( l[5],  l[9]);\n\tswap( l[3],  l[6]);\n\tswap( l[4],  l[7]);\n\tswap( l[5],  l[8]);\n\tswap( l[5],  l[7]);\n\tswap( l[4],  l[6]);\n\tswap( l[5],  l[6]);\n\tswap(l[13], l[14]);\n\tswap(l[12], l[14]);\n\tswap(l[12], l[13]);\n\tswap(l[16], l[17]);\n\tswap(l[15], l[17]);\n\tswap(l[15], l[16]);\n\tswap(l[12], l[15]);\n\tswap(l[13], l[16]);\n\tswap(l[14], l[17]);\n\tswap(l[14], l[16]);\n\tswap(l[13], l[15]);\n\tswap(l[14], l[15]);\n\tswap(l[19], l[20]);\n\tswap(l[18], l[20]);\n\tswap(l[18], l[19]);\n\tswap(l[22], l[23]);\n\tswap(l[21], l[23]);\n\tswap(l[21], l[22]);\n\tswap(l[18], l[21]);\n\tswap(l[19], l[22]);\n\tswap(l[20], l[23]);\n\tswap(l[20], l[22]);\n\tswap(l[19], l[21]);\n\tswap(l[20], l[21]);\n\tswap(l[12], l[18]);\n\tswap(l[13], l[19]);\n\tswap(l[14], l[20]);\n\tswap(l[14], l[19]);\n\tswap(l[13], l[18]);\n\tswap(l[14], l[18]);\n\tswap(l[15], l[21]);\n\tswap(l[16], l[22]);\n\tswap(l[17], l[23]);\n\tswap(l[17], l[22]);\n\tswap(l[16], l[21]);\n\tswap(l[17], l[21]);\n\tswap(l[15], l[18]);\n\tswap(l[16], l[19]);\n\tswap(l[17], l[20]);\n\tswap(l[17], l[19]);\n\tswap(l[16], l[18]);\n\tswap(l[17], l[18]);\n\tswap( l[0], l[12]);\n\tswap( l[1], l[13]);\n\tswap( l[2], l[14]);\n\tswap( l[2], l[13]);\n\tswap( l[1], l[12]);\n\tswap( l[2], l[12]);\n\tswap( l[3], l[15]);\n\tswap( l[4], l[16]);\n\tswap( l[5], l[17]);\n\tswap( l[5], l[16]);\n\tswap( l[4], l[15]);\n\tswap( l[5], l[15]);\n\tswap( l[3], l[12]);\n\tswap( l[4], l[13]);\n\tswap( l[5], l[14]);\n\tswap( l[5], l[13]);\n\tswap( l[4], l[12]);\n\tswap( l[5], l[12]);\n\tswap( l[6], l[18]);\n\tswap( l[7], l[19]);\n\tswap( l[8], l[20]);\n\tswap( l[8], l[19]);\n\tswap( l[7], l[18]);\n\tswap( l[8], l[18]);\n\tswap( l[9], l[21]);\n\tswap(l[10], l[22]);\n\tswap(l[11], l[23]);\n\tswap(l[11], l[22]);\n\tswap(l[10], l[21]);\n\tswap(l[11], l[21]);\n\tswap( l[9], l[18]);\n\tswap(l[10], l[19]);\n\tswap(l[11], l[20]);\n\tswap(l[11], l[19]);\n\tswap(l[10], l[18]);\n\tswap(l[11], l[18]);\n\tswap( l[6], l[12]);\n\tswap( l[7], l[13]);\n\tswap( l[8], l[14]);\n\tswap( l[8], l[13]);\n\tswap( l[7], l[12]);\n\tswap( l[8], l[12]);\n\tswap( l[9], l[15]);\n\tswap(l[10], l[16]);\n\tswap(l[11], l[17]);\n\tswap(l[11], l[16]);\n\tswap(l[10], l[15]);\n\tswap(l[11], l[15]);\n\tswap( l[9], l[12]);\n\tswap(l[10], l[13]);\n\tswap(l[11], l[14]);\n\tswap(l[11], l[13]);\n\tswap(l[10], l[12]);\n\tswap(l[11], l[12]);\n\t#endif \n\t\n\t#if COUNT == 32\n\tswap( l[0],  l[1]);\n\tswap( l[2],  l[3]);\n\tswap( l[0],  l[2]);\n\tswap( l[1],  l[3]);\n\tswap( l[1],  l[2]);\n\tswap( l[4],  l[5]);\n\tswap( l[6],  l[7]);\n\tswap( l[4],  l[6]);\n\tswap( l[5],  l[7]);\n\tswap( l[5],  l[6]);\n\tswap( l[0],  l[4]);\n\tswap( l[1],  l[5]);\n\tswap( l[1],  l[4]);\n\tswap( l[2],  l[6]);\n\tswap( l[3],  l[7]);\n\tswap( l[3],  l[6]);\n\tswap( l[2],  l[4]);\n\tswap( l[3],  l[5]);\n\tswap( l[3],  l[4]);\n\tswap( l[8],  l[9]);\n\tswap(l[10], l[11]);\n\tswap( l[8], l[10]);\n\tswap( l[9], l[11]);\n\tswap( l[9], l[10]);\n\tswap(l[12], l[13]);\n\tswap(l[14], l[15]);\n\tswap(l[12], l[14]);\n\tswap(l[13], l[15]);\n\tswap(l[13], l[14]);\n\tswap( l[8], l[12]);\n\tswap( l[9], l[13]);\n\tswap( l[9], l[12]);\n\tswap(l[10], l[14]);\n\tswap(l[11], l[15]);\n\tswap(l[11], l[14]);\n\tswap(l[10], l[12]);\n\tswap(l[11], l[13]);\n\tswap(l[11], l[12]);\n\tswap( l[0],  l[8]);\n\tswap( l[1],  l[9]);\n\tswap( l[1],  l[8]);\n\tswap( l[2], l[10]);\n\tswap( l[3], l[11]);\n\tswap( l[3], l[10]);\n\tswap( l[2],  l[8]);\n\tswap( l[3],  l[9]);\n\tswap( l[3],  l[8]);\n\tswap( l[4], l[12]);\n\tswap( l[5], l[13]);\n\tswap( l[5], l[12]);\n\tswap( l[6], l[14]);\n\tswap( l[7], l[15]);\n\tswap( l[7], l[14]);\n\tswap( l[6], l[12]);\n\tswap( l[7], l[13]);\n\tswap( l[7], l[12]);\n\tswap( l[4],  l[8]);\n\tswap( l[5],  l[9]);\n\tswap( l[5],  l[8]);\n\tswap( l[6], l[10]);\n\tswap( l[7], l[11]);\n\tswap( l[7], l[10]);\n\tswap( l[6],  l[8]);\n\tswap( l[7],  l[9]);\n\tswap( l[7],  l[8]);\n\tswap(l[16], l[17]);\n\tswap(l[18], l[19]);\n\tswap(l[16], l[18]);\n\tswap(l[17], l[19]);\n\tswap(l[17], l[18]);\n\tswap(l[20], l[21]);\n\tswap(l[22], l[23]);\n\tswap(l[20], l[22]);\n\tswap(l[21], l[23]);\n\tswap(l[21], l[22]);\n\tswap(l[16], l[20]);\n\tswap(l[17], l[21]);\n\tswap(l[17], l[20]);\n\tswap(l[18], l[22]);\n\tswap(l[19], l[23]);\n\tswap(l[19], l[22]);\n\tswap(l[18], l[20]);\n\tswap(l[19], l[21]);\n\tswap(l[19], l[20]);\n\tswap(l[24], l[25]);\n\tswap(l[26], l[27]);\n\tswap(l[24], l[26]);\n\tswap(l[25], l[27]);\n\tswap(l[25], l[26]);\n\tswap(l[28], l[29]);\n\tswap(l[30], l[31]);\n\tswap(l[28], l[30]);\n\tswap(l[29], l[31]);\n\tswap(l[29], l[30]);\n\tswap(l[24], l[28]);\n\tswap(l[25], l[29]);\n\tswap(l[25], l[28]);\n\tswap(l[26], l[30]);\n\tswap(l[27], l[31]);\n\tswap(l[27], l[30]);\n\tswap(l[26], l[28]);\n\tswap(l[27], l[29]);\n\tswap(l[27], l[28]);\n\tswap(l[16], l[24]);\n\tswap(l[17], l[25]);\n\tswap(l[17], l[24]);\n\tswap(l[18], l[26]);\n\tswap(l[19], l[27]);\n\tswap(l[19], l[26]);\n\tswap(l[18], l[24]);\n\tswap(l[19], l[25]);\n\tswap(l[19], l[24]);\n\tswap(l[20], l[28]);\n\tswap(l[21], l[29]);\n\tswap(l[21], l[28]);\n\tswap(l[22], l[30]);\n\tswap(l[23], l[31]);\n\tswap(l[23], l[30]);\n\tswap(l[22], l[28]);\n\tswap(l[23], l[29]);\n\tswap(l[23], l[28]);\n\tswap(l[20], l[24]);\n\tswap(l[21], l[25]);\n\tswap(l[21], l[24]);\n\tswap(l[22], l[26]);\n\tswap(l[23], l[27]);\n\tswap(l[23], l[26]);\n\tswap(l[22], l[24]);\n\tswap(l[23], l[25]);\n\tswap(l[23], l[24]);\n\tswap( l[0], l[16]);\n\tswap( l[1], l[17]);\n\tswap( l[1], l[16]);\n\tswap( l[2], l[18]);\n\tswap( l[3], l[19]);\n\tswap( l[3], l[18]);\n\tswap( l[2], l[16]);\n\tswap( l[3], l[17]);\n\tswap( l[3], l[16]);\n\tswap( l[4], l[20]);\n\tswap( l[5], l[21]);\n\tswap( l[5], l[20]);\n\tswap( l[6], l[22]);\n\tswap( l[7], l[23]);\n\tswap( l[7], l[22]);\n\tswap( l[6], l[20]);\n\tswap( l[7], l[21]);\n\tswap( l[7], l[20]);\n\tswap( l[4], l[16]);\n\tswap( l[5], l[17]);\n\tswap( l[5], l[16]);\n\tswap( l[6], l[18]);\n\tswap( l[7], l[19]);\n\tswap( l[7], l[18]);\n\tswap( l[6], l[16]);\n\tswap( l[7], l[17]);\n\tswap( l[7], l[16]);\n\tswap( l[8], l[24]);\n\tswap( l[9], l[25]);\n\tswap( l[9], l[24]);\n\tswap(l[10], l[26]);\n\tswap(l[11], l[27]);\n\tswap(l[11], l[26]);\n\tswap(l[10], l[24]);\n\tswap(l[11], l[25]);\n\tswap(l[11], l[24]);\n\tswap(l[12], l[28]);\n\tswap(l[13], l[29]);\n\tswap(l[13], l[28]);\n\tswap(l[14], l[30]);\n\tswap(l[15], l[31]);\n\tswap(l[15], l[30]);\n\tswap(l[14], l[28]);\n\tswap(l[15], l[29]);\n\tswap(l[15], l[28]);\n\tswap(l[12], l[24]);\n\tswap(l[13], l[25]);\n\tswap(l[13], l[24]);\n\tswap(l[14], l[26]);\n\tswap(l[15], l[27]);\n\tswap(l[15], l[26]);\n\tswap(l[14], l[24]);\n\tswap(l[15], l[25]);\n\tswap(l[15], l[24]);\n\tswap( l[8], l[16]);\n\tswap( l[9], l[17]);\n\tswap( l[9], l[16]);\n\tswap(l[10], l[18]);\n\tswap(l[11], l[19]);\n\tswap(l[11], l[18]);\n\tswap(l[10], l[16]);\n\tswap(l[11], l[17]);\n\tswap(l[11], l[16]);\n\tswap(l[12], l[20]);\n\tswap(l[13], l[21]);\n\tswap(l[13], l[20]);\n\tswap(l[14], l[22]);\n\tswap(l[15], l[23]);\n\tswap(l[15], l[22]);\n\tswap(l[14], l[20]);\n\tswap(l[15], l[21]);\n\tswap(l[15], l[20]);\n\tswap(l[12], l[16]);\n\tswap(l[13], l[17]);\n\tswap(l[13], l[16]);\n\tswap(l[14], l[18]);\n\tswap(l[15], l[19]);\n\tswap(l[15], l[18]);\n\tswap(l[14], l[16]);\n\tswap(l[15], l[17]);\n\tswap(l[15], l[16]);\n\t#endif\n}\n\n\nvoid swap(inout float a, inout float b)\n{\n\tfloat c = min(a, b);\n \tb \t= max(a, b);\n\ta \t= c;\n}\n\n", "user": "3893771", "parent": null, "id": 47118}