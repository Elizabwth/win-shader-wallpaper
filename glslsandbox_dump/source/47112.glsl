{"code": "#ifdef GL_ES\nprecision mediump float;\n#endif\n\n#extension GL_OES_standard_derivatives : enable\n\n// Air streams by WAHa.06x36^SVatG (https://www.shadertoy.com/view/Ms3fWf)\n\nuniform float time;\nuniform vec2 mouse;\nuniform vec2 resolution;\n\nvec3 getSkyColor(vec3 e) {\n\tfloat skyY = max(e.y, 0.0);\n\tfloat cloudY = max(-e.y, 0.0);\n\treturn vec3(\n\t\tpow(1.0 - skyY, 2.0),\n\t\t1.0 - skyY,\n\t\t0.6 + (1.0 - skyY) * 0.4\n\t) * mix(vec3(1.0), vec3(0.8, 0.8, 0.85), cloudY);\n}\n\nmat3 fromEuler(vec3 ang) {\n\tvec2 a1 = vec2(sin(ang.x), cos(ang.x));\n\tvec2 a2 = vec2(sin(ang.y), cos(ang.y));\n\tvec2 a3 = vec2(sin(ang.z), cos(ang.z));\n\treturn mat3(\n\t\tvec3(a1.y * a3.y + a1.x * a2.x * a3.x, a1.y * a2.x * a3.x + a3.y * a1.x, -a2.y * a3.x),\n\t\tvec3(-a2.y * a1.x, a1.y * a2.y, a2.x),\n\t\tvec3(a3.y * a1.x * a2.x + a1.y * a3.x, a1.x * a3.x - a1.y * a3.y * a2.x, a2.y * a3.y)\n\t);\n}\n\nvoid main( void ) {\n\tvec2 p = (2.0 * gl_FragCoord.xy - resolution.xy) / min(resolution.x, resolution.y);\n        \n\tvec3 ang = vec3( 0.0, -(mouse.y - 0.5) * 3.14159265 * 1.0, mouse.x * 3.1415926535 * 2.0);\n\tvec3 pos = vec3(0.0,0.0,0.0);\n\tvec3 dir = normalize(vec3(p.xy, -2.0 + length(p) * 0.15)) * fromEuler(ang);\n\t\n\tvec3 sky = getSkyColor(dir);\n\n\tvec3 color = sky;\n\tfor(int i = 1; i < 16; i++) {\n\t\tfloat r = float(i) * 1.0 + 0.33;\n\t\tfloat z = r * dir.z / length(dir.xy);\n\t\tfloat a = atan(dir.y, dir.x);\n\t\tfloat pattern = sin(a * (4.0 * float(i)) + sin((z + time * 20.0 + float(i)) * 0.5 / (float(i) + 2.0)) * 3.0);\n\t\tcolor *= (1.0 + pow((pattern + 1.0) * 0.5, 4.0) * 0.1 / (length(vec2(abs(z), r)) + 5.0));\n\t}\n\t\n\tgl_FragColor = vec4(pow(color,vec3(0.75)), 1.0);\n}\n", "user": "b38120a", "parent": null, "id": 47112}