{"code": "precision mediump float;\nuniform float time;\nuniform vec2 mouse;\nuniform vec2 resolution;\nfloat segment(vec2 position, vec2 start_p, vec2 end_p)\n{\n\tvec2 AP = position - start_p;\n\tvec2 AB = end_p - start_p;\n\tfloat h = clamp(dot(AP, AB) / dot(AB, AB), 0.0, 1.0);\n\tfloat seg = length(AP - AB * h);\n\treturn seg;\n}\n/*\nfloat segment(vec2 position, vec2 start_p, vec2 end_p)\n{\n\tfloat seg;\n\tvec2 AP = position - start_p;\n\tvec2 AB = end_p - start_p;\n\tfloat cos_sita = dot(AP, AB) / (length(AP) * length(AB));\n\tfloat dis = dot(AP, AB) / length(AB);\n\tif(dis <= length(AB) && cos_sita >= 0.0)\n\t\tseg = length(AP) * sqrt(1.0 - cos_sita * cos_sita);\n\telse if (cos_sita < 0.0)\n\t\tseg = length(AP);\n\telse\n\t\tseg = length(AP - AB) * 1.0;\n\treturn seg;\n}\n*/\nvoid main( void ) {\n\t\tvec2 uv=(gl_FragCoord.xy/resolution.xy)*2.0-1.0 ;\n\t\n\tvec2 position = uv;\n\tposition.x = position.x*(resolution.x / resolution.y) - 0.5;\n\tvec4 color = vec4(1.0);\n\tvec2 A = vec2(0.1, -0.0);\n\tvec2 B = vec2(0.5, 0.5);\n\tfloat line_1 = segment(position, A, B);\n\tvec4 color_1 = color * 0.01 / line_1;\n\tgl_FragColor = color_1;\n\tgl_FragColor = clamp(gl_FragColor, 0.0, 1.0);\n}", "user": "c178221", "parent": "/e#46515.0", "id": 47372}