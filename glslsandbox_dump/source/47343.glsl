{"code": "//--- hatsuyuki ---\n// by Catzpaw 2016\n#ifdef GL_ES\nprecision mediump float;\n#endif\n\n#extension GL_OES_standard_derivatives : enable\n\nuniform float time;\nuniform vec2 mouse;\nuniform vec2 resolution;\n\nfloat random (vec2 st) {\n    return fract(sin(dot(st.xy,\n                         vec2(12.9898,78.233)))*\n        43758.5453123);\n}\n\nvec2 calc(vec2 point1, vec2 point2) {\n\tvec2 off = point1 - point2;\n\tfloat k = off.y/off.x;\n\tfloat b = point1.y - k * point1.x;\n\treturn vec2(k, b);\n}\n\nfloat color(vec2 point1, vec2 point2, vec2 point3, vec2 point4, vec2 uv) {\n\tvec2 line1 = calc(point1, point2);\n\tvec2 line2 = calc(point2, point3);\n\tvec2 line3 = calc(point3, point4);\n\tvec2 line4 = calc(point4, point1);\n\t\n\tfloat color = 1. - step(line1.x * uv.x + line1.y, uv.y);\n\tcolor *= step(line3.x * uv.x + line3.y, uv.y);\n\tcolor *= 1. - step((uv.y - line4.y)/line4.x, uv.x);\n\tcolor *= step((uv.y - line2.y)/line2.x, uv.x);\n\treturn color;\n}\n\n\nfloat circle(float radius, vec2 coord) {\n    if (abs(coord.x) > radius || abs(coord.y) > radius) {\n        return 1.;\n    }\n    return smoothstep(radius, radius, length(coord));\n}\n\nvoid main(void){\n\tvec2 uv=(gl_FragCoord.xy*2.-resolution.xy)/resolution.y; \n\tvec3 finalColor=vec3(0);\n\t// 1\n\tvec2 point1 = vec2(0.8+ 0.2 * random(vec2(0.,0.) + 0.1) * sin(time - 10.), 0.2 + 0.1 * random(vec2(0.,0.) + 0.2)  * sin(time - 20.));\n\t// 4\n\tvec2 point4 = vec2(0.8 + 0.2 * random(vec2(0.,0.) + 0.3) * cos(time), -0.2 - 0.1 * random(vec2(0.,0.) + 0.4)  * sin(time*1.));\n\t// 3\n\tvec2 point3 = vec2(-0.8 - 0.2 * random(vec2(0.,0.) + 0.5) * sin(time), -0.2 - 0.1 * random(vec2(0.,0.) + 0.6) * cos(time) );\n\t// 2\n\tvec2 point2 = vec2(-0.8 - 0.2 * random(vec2(0.,0.) + 0.7) * sin(time), 0.5 + 0.1 * random(vec2(0.,0.) + 0.8)  * sin(time));\n\n\t\n\tfloat c = color(point1, point2, point3, point4, uv);\n\tvec3 red = vec3(c, 0.,0.);\n\tvec3 circle = vec3(0.);\n\tgl_FragColor = vec4(mix(circle, red, 0.5),1);\n}\n", "user": "574e187", "parent": "/e#47126.0", "id": 47343}