{"code": "/*\n\tIridule ~\n\t\tshadertoy: iridule\n\t\ttwitter: @iridule\n\t\tinstagram: @the_iridule\n\t\temail: numinouscranium@gmail.com\n\t\n*/\n\n#ifdef GL_ES\nprecision mediump float;\n#endif\n#extension GL_OES_standard_derivatives : enable\n\nuniform float time;\nuniform vec2 resolution;\n\n\nvec2 iResolution;\nfloat iTime;\n\n#define repeat(v) mod(p + 1., 2.) -1.\n#define un(a, b) min(a, b)\n\nmat3 rotateX(float a) {\n\treturn mat3(\n    \t1.0, 0.0, 0.0,\n        0.0, cos(a), sin(a),\n        0.0, -sin(a), cos(a)\n    );\n}\n\nmat3 rotateY(float a) {\n\treturn mat3(\n    \tcos(a), 0.0, sin(a),\n        0.0, 1.0, 0.0,\n        -sin(a), 0.0, cos(a)\n    );\n}\n\nfloat sphere_sdf(vec3 p, float r) {\n\treturn length(p) - r;\n}\n\nfloat cube_sdf(vec3 p, float s) {\n\treturn length(max(abs(p) - s, .0));\n}\n\nfloat ring_sdf(vec3 p, float s) {\n\tfloat a = sphere_sdf(p + vec3(.2, .0, .0), s);\n    float b = sphere_sdf(p + vec3(-.2, .0, .0), s);\n    float A = un(a, b);\n    float c = sphere_sdf(p + vec3(.0, .0, .1), s);\n    float d = sphere_sdf(p + vec3(.0, .0, -.1), s);\n    float B = un(c, d);\n    return un(A, B);\n}\n\nfloat shape_sdf(vec3 p) {\n\tvec3 v = rotateY(iTime) * p;\n\tvec3 v2 = rotateY(-iTime) * (p + vec3(0., 1., 0.));    \n\tv.y = mod(v.y + 0.2, 0.4) - 0.2;\n\tv2.y = mod(v2.y + 0.2, 0.4) - 0.2;\n\tfloat rings = un(\n\t\tring_sdf(v, .05),\n\t\tring_sdf(v2, .1)\n\t\t);\n\treturn un(\n\t\trings,\n\t\tsphere_sdf(\n\t\t\tp * vec3(1., .01, 1.),\n\t\t\t0.1\n\t\t)\n\t);\n}\n\n\nvoid mainImage(out vec4 O, in vec2 I) {\n    \tvec2 R = iResolution.xy;\n\tvec2 uv = (2. * I - R) / R.y;\t\n\tvec3 o = vec3(-1., 0., iTime), d  = vec3(uv, 1.), p;\n\tfloat t = 0.;\n\tfor (int i = 0; i < 50; i++) {\n\t\tp = o + d * t;\n        p = repeat(p);\n\t\tt += .5 * shape_sdf(p);\n\t}\n\tfloat l = .8 * dot(normalize(o - p), d);\n\tO = vec4(.5 * vec3(0., uv.y, uv.y) + vec3(.0, .3, 1.) * l  * vec3(t * .3), 1.);\n}\t\n\nvoid main(void) {\n\tiResolution = resolution;\n\tiTime = time;\n\tmainImage(gl_FragColor, gl_FragCoord.xy);\n}\n", "user": "fa487f5", "parent": "/e#47400.0", "id": 47424}