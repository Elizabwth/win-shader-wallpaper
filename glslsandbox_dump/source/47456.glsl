{"code": "#ifdef GL_ES\nprecision mediump float;\n#endif\n\n#extension GL_OES_standard_derivatives : enable\n\n//author: tigrou dot ind at gmail dot com\n//13.06.2018 : optimization\n\nuniform vec2 resolution;\nuniform float time;\n\nfloat tri(vec2 pos)\n{\n\tfloat a = -(pos.x * sqrt(3.0) -0.2) - pos.y;\n\tfloat b = pos.x * sqrt(3.0) - pos.y + 0.2;\n\tfloat c = pos.y + 0.1;\n\t\n\tfloat result = min(min(a, b), c);\t\n\treturn step(0.0, result)*2.0-1.0;\n}\n\nvoid main( void ) {\n\n\tvec2 pos = ( gl_FragCoord.xy / resolution.xy ) - vec2(0.5, 0.5);\n\t\n\tmat2 rot = mat2(cos(time),-sin(time), \n\t\t\tsin(time), cos(time));\n        pos *= rot;\n\t\n\tfloat zoom = 1.0/(mod(time, 1.0)+1.0)*3.0-1.0;\n\tpos *= zoom;\n        \n\tvec2 invpos = vec2(pos.x, -pos.y);\n\t\n\tfloat result = tri(pos*0.0625)\n\t\t      *tri(invpos*0.125)\n\t\t      *tri(pos*0.25)\n\t\t      *tri(invpos*0.5)\n\t\t      *tri(pos)\n\t\t      *tri(invpos*2.0)\n\t\t      *tri(pos*4.0)\n\t\t      *tri(invpos*8.0)\n\t\t      *tri(pos*16.0)\n\t\t      *tri(invpos*32.0)\n\t\t      *tri(pos*64.0);\n\t\n        result = max(result, 0.0);\t\n\t\n\tgl_FragColor = vec4( mix(vec3(0.5, 0.0, 1.0), vec3(0.0,0.0,0.0), result), 1.0 );\n}", "user": "11ff5e3", "parent": "/e#47455.0", "id": 47456}